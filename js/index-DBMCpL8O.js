import{i as v}from"./isEmpty-DYPsx7Mq.js";import{d as y,b as s,o as c,w as o,e as n,s as i,Q as f,cG as p}from"./index-DYGX83NG.js";const h=y({props:{value:{type:Object,required:!0},onChange:{type:Function,required:!0},options:{type:Array,required:!1},plainKeyInput:{type:Boolean,required:!1,default:!1}},setup(l){const t=s([]),r=s(new Set);return c(()=>{if(!v(l.value)){const a=Object.entries(l.value).map(([e,u])=>(r.value.add(e),{key:e,value:u.toString()}));t.value=a}}),o(()=>t.value,a=>{const e=a.reduce((u,d)=>(d.key===""&&d.value===""||(u[d.key]=d.value.toString()),u),{});l.onChange(e)},{deep:!0}),o(()=>t.value,a=>{r.value.clear(),a.forEach(e=>{r.value.add(e.key)})},{deep:!0}),()=>n(p,{value:t.value,onUpdateValue:a=>{t.value=(()=>{const e=a.indexOf(null);return e!==-1&&a.splice(e,1,{key:"",value:""}),a})()},createButtonProps:{secondary:!0,type:"info",ghost:!1,bordered:!0,quaternary:!1}},{default(a){return n("div",{class:"flex w-full items-center"},[l.plainKeyInput?n(i,{class:"mr-4",placeholder:"请输入",value:a.value.key,onUpdateValue:e=>{a.value.key=e}},null):n(f,{class:"mr-4",filterable:!0,tag:!0,placeholder:"请选择",value:a.value.key,onUpdateValue:e=>{a.value.key=e},options:l.options?.map(e=>({...e,disabled:r.value.has(e.value)}))},null),n(i,{value:a.value.value.toString(),onUpdateValue:e=>{a.value.value=e}},null)])}})}});export{h as K};
